# Maintainer: DingVero <dingvero@outlook.com>

pkgname=relayfetch-bin
pkgver=@VERSION@
pkgrel=1
pkgdesc="Prebuilt relayfetch file relay service for @ARCH@"
arch=('@RUST_ARCH@')
url="https://github.com/dingwh03/relayfetch"
license=('MIT')

depends=('glibc' 'systemd')
provides=('relayfetch')
conflicts=('relayfetch')

install=relayfetch.install

source=(
  "relayfetch-@ARCH@::$url/releases/download/v$pkgver/relayfetch-$pkgver-linux-@ARCH@"
  "relayfetch.service"
  "config.toml"
  "files.toml"
)
sha256sums=('SKIP' 'SKIP' 'SKIP' 'SKIP')

package() {
  install -Dm755 "relayfetch-@ARCH@" "$pkgdir/usr/local/bin/relayfetch"
  install -Dm644 config.toml "$pkgdir/etc/relayfetch/config.toml"
  install -Dm644 files.toml "$pkgdir/etc/relayfetch/files.toml"
  install -Dm644 relayfetch.service "$pkgdir/etc/systemd/system/relayfetch.service"
}
